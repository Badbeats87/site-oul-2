<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Submission Detail - Vinyl Catalog</title>
    <link rel="stylesheet" href="../../styles/design-system.css?v=20251203" />
    <link rel="stylesheet" href="../../styles/admin.css?v=20251203" />
  </head>
  <body class="admin-body admin-body--topnav">
    <header class="admin-topbar">
      <div class="admin-topbar__brand">
        <span class="admin-sidebar__logo">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="#fff"
            stroke-width="1.5"
            width="26"
            height="26"
            aria-hidden="true"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="6"></circle>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
        </span>
        <div>
          <div class="admin-sidebar__title">Vinyl Catalog</div>
          <div class="admin-sidebar__subtitle">Operations Console</div>
        </div>
      </div>

      <form class="admin-topbar__search" role="search">
        <svg
          viewBox="0 0 24 24"
          width="16"
          height="16"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          aria-hidden="true"
        >
          <circle cx="11" cy="11" r="7"></circle>
          <line x1="16.5" y1="16.5" x2="21" y2="21"></line>
        </svg>
        <input
          type="search"
          placeholder="Search submissions, sellers…"
          aria-label="Search admin data"
        />
        <button type="submit" aria-label="Submit search">
          <svg
            viewBox="0 0 24 24"
            width="14"
            height="14"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </button>
      </form>

      <div class="admin-topbar__actions">
        <button
          class="admin-icon-button"
          type="button"
          aria-label="View notifications"
        >
          <svg
            viewBox="0 0 24 24"
            width="16"
            height="16"
            fill="none"
            stroke="currentColor"
            stroke-width="1.7"
          >
            <path d="M18 8a6 6 0 10-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 01-3.46 0"></path>
          </svg>
        </button>
        <div class="admin-topbar__user">
          <div class="admin-avatar" aria-hidden="true">AM</div>
          <div class="admin-header__user-meta">
            <span class="eyebrow" style="color: rgba(243, 244, 246, 0.7)"
              >Review Lead</span
            >
            <strong>Alex Mercer</strong>
            <span>Shift: Morning · SLA target 45m</span>
          </div>
        </div>
      </div>

      <button
        class="button button--ghost button--sm admin-topbar__toggle"
        type="button"
        data-nav-toggle
        aria-expanded="false"
      >
        Menu
      </button>
    </header>

    <nav class="admin-subnav" aria-label="Admin navigation">
      <div class="admin-topbar__nav admin-subnav__links" id="admin-topbar-nav">
        <a class="admin-nav__link" href="index.html">Dashboard</a>
        <a
          class="admin-nav__link admin-nav__link--active"
          href="submission.html"
          >Submissions</a
        >
        <a class="admin-nav__link" href="inventory.html">Inventory</a>
        <a class="admin-nav__link" href="pricing-editor.html">Pricing</a>
      </div>
    </nav>

    <div class="admin-announcement">
      Review window: 8am–10pm. Escalations auto-forwarded to Ops bridge.
    </div>

    <main class="admin-main admin-main--wide">
      <header class="admin-toolbar">
        <div class="admin-toolbar__context">
          <p class="eyebrow">Submission review</p>
          <h1>Submission Detail</h1>
          <p data-submission-id-display class="text-muted"></p>
        </div>
        <div class="admin-toolbar__actions">
          <button
            class="button button--secondary button--sm"
            data-submission-reject-all
            disabled
          >
            Reject All
          </button>
          <button
            class="button button--primary button--sm"
            data-submission-accept-all
            disabled
          >
            Accept All
          </button>
          <button
            class="button button--danger button--sm"
            type="button"
            data-logout-btn
          >
            Logout
          </button>
        </div>
      </header>

      <a
        href="index.html"
        class="breadcrumb-link"
        style="
          margin-bottom: var(--space-lg);
          display: inline-flex;
          align-items: center;
          gap: var(--space-sm);
        "
      >
        ← Back to submissions
      </a>

      <section class="admin-panel section-panel" data-submission-summary>
        <p>Loading submission details...</p>
      </section>

      <section class="admin-panel section-panel" data-submission-items>
        <div class="section-header" style="margin-bottom: var(--space-lg)">
          <div>
            <p class="eyebrow">Items</p>
            <h2>Offer Builder</h2>
            <p class="text-muted">
              Review, counter and accept individual items
            </p>
          </div>
        </div>
        <div data-items-container></div>
      </section>

      <section class="admin-panel section-panel" data-submission-audit>
        <div class="section-header">
          <div>
            <p class="eyebrow">Activity log</p>
            <h2>Recent Activity</h2>
          </div>
        </div>
        <div data-audit-container class="audit-list"></div>
      </section>

      <footer class="admin-footer">
        &copy; 2024 Vinyl Catalog — Submission workflow.
      </footer>
    </main>

    <div class="loading-overlay" data-loading>
      <div class="loading-overlay__content">
        <div class="loading-spinner" aria-hidden="true"></div>
        <div>Loading…</div>
      </div>
    </div>

    <script src="../../js/api-client.js?v=20251205"></script>
    <script src="../../js/auth.js?v=20251205"></script>
    <script src="../../js/submission-detail.js?v=20251205"></script>
    <script src="../../js/topnav.js?v=20251205"></script>
    <script>
      document.addEventListener('DOMContentLoaded', async function () {
        const isAuthenticated = await auth.verifySession();
        if (!isAuthenticated) {
          window.location.href = '/pages/admin/login.html';
          return;
        }

        const page = new SubmissionDetailPage(api);
        page.init();

        const logoutBtn = document.querySelector('[data-logout-btn]');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            if (confirm('Sign out of the admin console?')) {
              await auth.logout();
            }
          });
        }
      });
    </script>
  </body>
</html>
